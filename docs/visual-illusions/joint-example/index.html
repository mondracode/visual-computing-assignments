<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Joint example of depth perception # Introduction # In this example we aim for a combined representation of the three visual illusions presented previously. Used correctly, the union of techniques of depth of field, linear perspective and parallax can lead to a very convincing 2D representation of a 3D space.
Antecedents and previous work # The examples and theoretical development of each of the techniques used
Depth of field Linear perspective Parallax Solution - a p5."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="4. A joint example of depth perception"><meta property="og:description" content="Joint example of depth perception # Introduction # In this example we aim for a combined representation of the three visual illusions presented previously. Used correctly, the union of techniques of depth of field, linear perspective and parallax can lead to a very convincing 2D representation of a 3D space.
Antecedents and previous work # The examples and theoretical development of each of the techniques used
Depth of field Linear perspective Parallax Solution - a p5."><meta property="og:type" content="article"><meta property="og:url" content="https://mondracode.github.io/visual-computing-assignments/docs/visual-illusions/joint-example/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-04-06T18:14:05-05:00"><title>4. A joint example of depth perception | Visual Computing Assignments</title><link rel=manifest href=/visual-computing-assignments/manifest.json><link rel=icon href=/visual-computing-assignments/favicon.png type=image/x-icon><link rel=stylesheet href=/visual-computing-assignments/book.min.f645590089b7c16b44348afb99c091ff439d5d03ced854740aa04e373e37a0dd.css integrity="sha256-9kVZAIm3wWtENIr7mcCR/0OdXQPO2FR0CqBONz43oN0=" crossorigin=anonymous><script defer src=/visual-computing-assignments/flexsearch.min.js></script>
<script defer src=/visual-computing-assignments/en.search.min.806061c597a3647b7ff8d5fe4fc7297c9d8128cef96a8504fda277c7763ee617.js integrity="sha256-gGBhxZejZHt/+NX+T8cpfJ2BKM75aoUE/aJ3x3Y+5hc=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/visual-computing-assignments/><span>Visual Computing Assignments</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Visual Illusions</span><ul><li><a href=/visual-computing-assignments/docs/visual-illusions/depth-of-field/>1. Depth of Field</a></li><li><a href=/visual-computing-assignments/docs/visual-illusions/linear-perspective/>2. Linear Perspective</a></li><li><a href=/visual-computing-assignments/docs/visual-illusions/parallax/>3. Parallax</a></li><li><a href=/visual-computing-assignments/docs/visual-illusions/joint-example/ class=active>4. A joint example of depth perception</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/visual-computing-assignments/svg/menu.svg class=book-icon alt=Menu></label>
<strong>4. A joint example of depth perception</strong>
<label for=toc-control><img src=/visual-computing-assignments/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#joint-example-of-depth-perception><strong>Joint example of depth perception</strong></a><ul><li><a href=#introduction><strong>Introduction</strong></a></li><li><a href=#antecedents-and-previous-work><strong>Antecedents and previous work</strong></a></li><li><a href=#solution---a-p5js-example><strong>Solution - a p5.js example</strong></a></li><li><a href=#code><strong>Code</strong></a></li><li><a href=#conclusions><strong>Conclusions</strong></a></li><li><a href=#future-work><strong>Future work</strong></a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=joint-example-of-depth-perception><strong>Joint example of depth perception</strong>
<a class=anchor href=#joint-example-of-depth-perception>#</a></h1><h2 id=introduction><strong>Introduction</strong>
<a class=anchor href=#introduction>#</a></h2><p>In this example we aim for a combined representation of the three visual illusions presented previously. Used correctly, the union of techniques of depth of field, linear perspective and parallax can lead to a very convincing 2D representation of a 3D space.</p><h2 id=antecedents-and-previous-work><strong>Antecedents and previous work</strong>
<a class=anchor href=#antecedents-and-previous-work>#</a></h2><p>The examples and theoretical development of each of the techniques used</p><ul><li><a href=/visual-computing-assignments/docs/visual-illusions/depth-of-field>Depth of field</a></li><li><a href=/visual-computing-assignments/docs/visual-illusions/linear-perspective>Linear perspective</a></li><li><a href=/visual-computing-assignments/docs/visual-illusions/parallax>Parallax</a></li></ul><h2 id=solution---a-p5js-example><strong>Solution - a p5.js example</strong>
<a class=anchor href=#solution---a-p5js-example>#</a></h2><iframe id=union style=width:530px;height:530px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js></script>
            
            
            
            
            
            <script src=/visual-computing-assignments/sketches/visual-illusions/union.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><p>We use a diverse set of tools and techniques to achieve the example showed above. First, the depth of field is represented in the blur of the different screen elements shown in the p5.js canvas. Depending on the distance of the elements, a different amount of blur is rendered across the screen.</p><p>Then, a couple of examples of linear perspective is used. The perspective used for the example is a bottom-up view, which shows the skyscrapers pointing towards the center of the screen as its height increases. If we were to extend each vertical line of the buildings, we could see them converge into a hypothetical horizon representing infinity on the center of the canvas. There is also the endlessly falling man. It appears from infinity (or that&rsquo;s what the illusion wants you to assume) and falls towards the observer in an endlsess cycle. As he approaches the viewer, his size grows in a way compatible with the theoretical concept that linear perspective offers.</p><p>Last but not least, we have the application of parallax. The observer looks up at the sky and sees multiple elements or layers: the skyscrapers, the falling man, and most importantly for this case, a few bird flocks flying across the sky, a plane which passes by once and some clouds moving slowly on the background. If you look closely, you can see that the existence of the birds, plane and clouds varies in size and speed, giving the sensation of depth as some elements seem to be closer to the observer than others. Combined with the other two effects, it gives a nice sensation of three-dimensionality and overall depth completely fabricated inside a 2D space.</p><h2 id=code><strong>Code</strong>
<a class=anchor href=#code>#</a></h2><p>In order to create the <strong>depth of field effect</strong>, it was necessary to create different version of the same image, given that it was expensive computationally to blur the whole image. The solution was to create a set of images with different levels of blur, and then use the distance of the elements to the observer to choose which image to render. The code for this is as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>// Load blurred images
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>blurredSkyscrapers</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>numberOfIntervals</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span><span style=color:#a6e22e>blurredSkyscrapers</span>.<span style=color:#a6e22e>push</span>(
</span></span><span style=display:flex><span><span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>hostURL</span><span style=color:#e6db74>}</span><span style=color:#e6db74>/assets/skyscrapers_blur_00</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>i</span><span style=color:#e6db74>}</span><span style=color:#e6db74>.png`</span>)
</span></span><span style=display:flex><span>);</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BlurredPlaneFactory</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>rangeInit</span>, <span style=color:#a6e22e>rangeEnd</span>, <span style=color:#a6e22e>n</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>a</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>rangeInit</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>b</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>rangeEnd</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>n</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>n</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>generateIntervals</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>intervalDelta</span> <span style=color:#f92672>=</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>b</span> <span style=color:#f92672>-</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>a</span>) <span style=color:#f92672>/</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>n</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>intervals</span> <span style=color:#f92672>=</span> Array.<span style=color:#a6e22e>from</span>(
</span></span><span style=display:flex><span>      { <span style=color:#a6e22e>length</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>n</span> },
</span></span><span style=display:flex><span>      (<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>i</span>) =&gt; <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>a</span> <span style=color:#f92672>+</span> (<span style=color:#a6e22e>i</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>intervalDelta</span>
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>intervals</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>intervals</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>intervals</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>getDiscreteIntervalForDepth</span>(<span style=color:#a6e22e>depth</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>interval</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>n</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>depth</span> <span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>intervals</span>[<span style=color:#a6e22e>i</span>]) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>interval</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>i</span>;
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>interval</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>getBlurredPlaneForQuantizedInterval</span>(<span style=color:#a6e22e>interval</span>, <span style=color:#a6e22e>category</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>switch</span> (<span style=color:#a6e22e>category</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;skyscrapers&#34;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>blurredSkyscrapers</span>[<span style=color:#a6e22e>interval</span>];
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>blurredSkyscrapers</span>[<span style=color:#a6e22e>interval</span>];
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>}</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>  <span style=color:#75715e>// Setup the blurred plane
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>blurredPlaneFactory</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>BlurredPlaneFactory</span>(
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>intervalLowerBound</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>intervalUpperBound</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>numberOfIntervals</span>
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>blurredPlaneIntervals</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>blurredPlaneFactory</span>.<span style=color:#a6e22e>generateIntervals</span>();</span></span></code></pre></div><p>So as to create the <strong>Parallax</strong> effect we designed a set of layers with different components. These components are the <strong>birds</strong>, the <strong>plane</strong>, the <strong>clouds</strong> and the buildings. Each of these components has a different speed and size, which is used to create the illusion of depth. The code for this is as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>  <span style=color:#75715e>// Setup the cloud layers and span the diferent clouds
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>layer</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>layer</span> <span style=color:#f92672>&lt;=</span> <span style=color:#a6e22e>NUMBER_OF_CLOUD_LAYERS</span>; <span style=color:#a6e22e>layer</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>5</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>clouds</span>.<span style=color:#a6e22e>push</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Cloud</span>(<span style=color:#a6e22e>layer</span>));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Setup the birds layers and span the diferent birds
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>layer</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>layer</span> <span style=color:#f92672>&lt;=</span> <span style=color:#a6e22e>NUMBER_OF_BIRD_LAYERS</span>; <span style=color:#a6e22e>layer</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>2</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>birds</span>.<span style=color:#a6e22e>push</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Birds</span>(<span style=color:#a6e22e>layer</span>));
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Setup the airplane
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>airplanes</span>.<span style=color:#a6e22e>push</span>(<span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Airplane</span>(<span style=color:#ae81ff>1</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Setup skyscrapers
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>skyscrapersLayer</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Skyscrapers</span>(<span style=color:#ae81ff>1</span>);</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Birds</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>layer</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>layer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>layer</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>random</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>border</span>, <span style=color:#a6e22e>width</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>border</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>random</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>border</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>border</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>deltaX</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>deltaX</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>layer</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>-=</span> <span style=color:#a6e22e>deltaX</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.6</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// out of screen control
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>&lt;</span> <span style=color:#f92672>-</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>layer</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>30</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>1.5</span>)) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>width</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>border</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>random</span>(<span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>width</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>border</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>border</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>random</span>(<span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>birdsGif</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>layer</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>30</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>1.5</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>layer</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>30</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Cloud</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>layer</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>layer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>layer</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>random</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>border</span>, <span style=color:#a6e22e>width</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>border</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>random</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>border</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>border</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>deltaX</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>deltaX</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>layer</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>deltaX</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.3</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// out of screen control
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>&lt;</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>border</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>border</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>random</span>(<span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>width</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>border</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>border</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>random</span>(<span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>height</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>cloudImg</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>layer</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>20</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>1.5</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>layer</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>20</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Airplane</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>layer</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>layer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>layer</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>layer</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>250</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>1.5</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>height</span> <span style=color:#f92672>-</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>layer</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>250</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>deltaX</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>deltaY</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>deltaX</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>layer</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>deltaY</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>layer</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.5</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>deltaX</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>-=</span> <span style=color:#a6e22e>deltaY</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>image</span>(
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>airplaneImg</span>,
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>,
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>,
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>layer</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>250</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>1.5</span>,
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>layer</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>250</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Skyscrapers</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>layer</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>layer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>layer</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>draw</span>(<span style=color:#a6e22e>imageToDraw</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>imageToDraw</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span>, <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span>, <span style=color:#ae81ff>500</span>, <span style=color:#ae81ff>500</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>  <span style=color:#75715e>// Use the background image on canva
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>background</span>(<span style=color:#a6e22e>bgImg</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// print the different clouds
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>cloud</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>clouds</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>cloud</span>.<span style=color:#a6e22e>draw</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// print the airplane
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>airplane</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>airplanes</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>airplane</span>.<span style=color:#a6e22e>draw</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// draw linear perspective skyscrapers
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>skyscrapersLayer</span>.<span style=color:#a6e22e>draw</span>(<span style=color:#a6e22e>blurredSkyscraper</span>);</span></span></code></pre></div><p>Finally, so as to create the <strong>linear perspective</strong> effect, we added a falling man in the sketch. This man looks as if he was falling in a 3D plain, however this is produced by the effect. The code for this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Man</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>constructor</span>(<span style=color:#a6e22e>layer</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>layer</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>layer</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>sizeMultiplier</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>deltaX</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>deltaY</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>sizeMultiplier</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>0.002</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>deltaX</span> <span style=color:#f92672>-=</span> <span style=color:#ae81ff>0.5</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>deltaY</span> <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>deltaX</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>140</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>deltaY</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>225</span>) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>deltaX</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>deltaY</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>sizeMultiplier</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.002</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>image</span>(
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>manGif</span>,
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>deltaX</span>,
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>y</span> <span style=color:#f92672>+</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>deltaY</span>,
</span></span><span style=display:flex><span>      <span style=color:#ae81ff>507</span> <span style=color:#f92672>*</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>sizeMultiplier</span> <span style=color:#f92672>%</span> <span style=color:#ae81ff>1</span>),
</span></span><span style=display:flex><span>      <span style=color:#ae81ff>358</span> <span style=color:#f92672>*</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>sizeMultiplier</span> <span style=color:#f92672>%</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>depthOfField</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>deltaX</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>text</span>(<span style=color:#e6db74>&#34;depth: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>depthOfField</span>, <span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>30</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>  <span style=color:#75715e>// draw falling man
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>fallingMan</span>.<span style=color:#a6e22e>draw</span>();</span></span></code></pre></div><h2 id=conclusions><strong>Conclusions</strong>
<a class=anchor href=#conclusions>#</a></h2><p>The illusion of depth is achieved by a combination of clever visual illusions to trick a viewer into seeing a three-dimension space on a flat surface. The creation and development of said techniques shaped the history of western art and are still widely used today. By using these concepts correctly and creatively, artists around the world have found a way to represent real environments more accurately, improving the artistical intent of the creators and opening completely new doors to new frontiers of creativity and technical expertise.</p><h2 id=future-work><strong>Future work</strong>
<a class=anchor href=#future-work>#</a></h2><p>As seen on other examples, the visual illusions here depicted can be showed more transparently and intuitively with the help of a 3D engine of some type. As screens are flat surfaces, 3D engines can be a more efficient way to show these effects since they are done naturally by its calculations and not by geometrical tricks or workarounds. The 2D simulation can also use some improvements. For example, the features of the blur and the amount of elements shown on parallax could be completely controlled by the user, but its implementation is computationally costly and ends up being out of scope for the purpose of this project.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/mondracode/visual-computing-assignments/commit/9d1a75d07717e09fb42b13019bd8948161e97150 title='Last modified by Paul Moros | April 6, 2023' target=_blank rel=noopener><img src=/visual-computing-assignments/svg/calendar.svg class=book-icon alt=Calendar>
<span>April 6, 2023</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#joint-example-of-depth-perception><strong>Joint example of depth perception</strong></a><ul><li><a href=#introduction><strong>Introduction</strong></a></li><li><a href=#antecedents-and-previous-work><strong>Antecedents and previous work</strong></a></li><li><a href=#solution---a-p5js-example><strong>Solution - a p5.js example</strong></a></li><li><a href=#code><strong>Code</strong></a></li><li><a href=#conclusions><strong>Conclusions</strong></a></li><li><a href=#future-work><strong>Future work</strong></a></li></ul></li></ul></nav></div></aside></main></body></html>